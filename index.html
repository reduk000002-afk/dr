async function sendBNB() {
  const to = document.getElementById("to").value.trim();
  const amount = document.getElementById("amount").value;

  if (!ethers.isAddress(to)) {
    alert("Некорректный адрес");
    return;
  }

  if (!amount || Number(amount) <= 0) {
    alert("Введите сумму");
    return;
  }

  try {
    // Проверка баланса
    const balance = await provider.getBalance(address);
    const value = ethers.parseEther(amount);

    if (balance < value) {
      alert("Недостаточно BNB для перевода");
      return;
    }

    const tx = await signer.sendTransaction({
      to: to,
      value: value,
      gasLimit: 21000n // стандартный перевод BNB
    });

    alert("Подтвердите транзакцию в Trust Wallet");

    const receipt = await tx.wait();
    alert("✅ Успешно!\nTX: " + receipt.hash);

    showInfo();

  } catch (e) {
    console.error(e);

    if (e.code === 4001) {
      alert("Транзакция отклонена пользователем");
    } else {
      alert("Ошибка: " + e.message);
    }
  }
}
